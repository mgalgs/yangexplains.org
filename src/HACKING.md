## Setting up a local dev environment

```
cd /path/to/yangexplains.org/src
```

and create a file named `env_file` with the following content:

```
SECRET_KEY=<redacted>
APP_SETTINGS=yangify.config.DevelopmentConfig
POSTGRES_USER=postgres
POSTGRES_PASSWORD=whatever_you_want
POSTGRES_HOST=db
POSTGRES_DB=postgres
GOOGLE_OAUTH_CLIENT_ID=<redacted>
GOOGLE_OAUTH_CLIENT_SECRET=<redacted>
```

See
[this](https://realpython.com/flask-google-login/#creating-a-google-client)
tutorial for creating a Google oauth app for testing.

You can generate a value for `SECRET_KEY` with:

```
python -c 'import secrets; print(secrets.token_urlsafe(16))'
```

(assumes `python` 3.6 or later)

Then start the app:

```
./composectl up
```

(`composectl` is a trivial wrapper around `docker-compose` which sets the
user/group inside the container to the current user)

In another terminal, apply the database schema:

```
docker exec src_flaskapp_1 flask db upgrade
```

The app should now be running on http://localhost:5000 with hot-reloading
of the backend and frontend code enabled.  Now just start hacking!

## Adding Python packages

If you need to add a Python package, start the app with `./composectl up`
and then run:

```
$ docker exec src_flaskapp_1 pip install SOME_PACKAGE
$ docker exec src_flaskapp_1 sh -c "pip freeze --local > requirements.txt"
```

(note that you might have a different autogenerated name than
`src_flaskapp_1` -- see `docker ps` to get the exact name)

## Adding Javascript packages

If you need to add a javascript package, start the app with
`./composectl up` and then run:

```
$ docker exec src_frontend_1 npm install SOME_PACKAGE --save
```

(note that you might have a different autogenerated name than
`src_frontend_1` -- see `docker ps` to get the exact name)
