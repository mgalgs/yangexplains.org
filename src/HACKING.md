## Setting up a local dev environment

```
cd /path/to/yangexplains.org/src
```

and create a file named `env_file` with the following content:

```
APP_SETTINGS=yangify.config.DevelopmentConfig
POSTGRES_USER=postgres
POSTGRES_PASSWORD=whatever_you_want
POSTGRES_HOST=db
POSTGRES_DB=postgres
GOOGLE_OAUTH_CLIENT_ID=<redacted>
GOOGLE_OAUTH_CLIENT_SECRET=<redacted>
```

See
[this](https://realpython.com/flask-google-login/#creating-a-google-client)
tutorial for creating a Google oauth app for testing.

Then start the app:

```
CURRENT_USER=$(id -u):$(id -g) docker-compose up
```

(we use the `CURRENT_USER` environment variable so that we can run `flask`
and `webpack` as your current user rather than root)

The app should now be running on http://localhost:5000 with hot-reloading
of the backend and frontend code enabled.  Now just start hacking!

## Adding Python packages

If you need to add a Python package, start the app with
`CURRENT_USER=$(id -u):$(id -g) docker-compose up` and then run:

```
$ docker exec src_flaskapp_1 pip install SOME_PACKAGE
$ docker exec src_flaskapp_1 sh -c "pip freeze --local > requirements.txt"
```

(note that you might have a different autogenerated name than
`src_flaskapp_1` -- see `docker ps` to get the exact name)

## Adding Javascript packages

If you need to add a javascript package, start the app with
`CURRENT_USER=$(id -u):$(id -g) docker-compose up`
and then run:

```
$ docker exec src_frontend_1 npm install SOME_PACKAGE --save
```

(note that you might have a different autogenerated name than
`src_frontend_1` -- see `docker ps` to get the exact name)
